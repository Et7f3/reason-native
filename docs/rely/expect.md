---
id: expect
title: Expect
sidebar_label: Expect
---

When you're writing tests, you often need to check that values meet certain conditions. Expect gives you access to a number of "matchers" that let you validate different things.

Virtually all matchers below are negatable via prepending `.not` after the type (e.g. `expect.string(actual).not.toBeEmpty()`, `expect.int(actual).not.toBe(42)`). Matchers that are not negatable will be explicitly called out in the documentation below.

<AUTOGENERATED_TABLE_OF_CONTENTS>

## `expect.array`

```reason
type equalsFn('a) = ('a, 'a) => bool;

type arrayMatchers('a) = {
  toEqual: (~equals: equalsFn('a)=?, array('a)) => unit,
  toBeEmpty: unit => unit,
  toContain: 'a => unit,
  toContainEqual: (~equals: equalsFn('a)=?, 'a) => unit,
};

type arrayMatchersWithNot('a) = {
  not: arrayMatchers('a),
  toEqual: (~equals: equalsFn('a)=?, array('a)) => unit,
  toBeEmpty: unit => unit,
  toContain: 'a => unit,
  toContainEqual: (~equals: equalsFn('a)=?, 'a) => unit,
};

let expect: {
  ...
  array: array('a) => arrayMatchersWithNot('a)
  ...
};
```

### `expect.array(array('a)).toBeEmpty()`

Use `expect.array(expected).toBeEmpty()` to check that an array is empty.

```reason
open TestFramework;

describe("expect.array.toBeEmpty", ({test}) => {
  test("Empty array should be empty", ({expect}) => {
    expect.array([||]).toBeEmpty();
  });
});
```

### `expect.array(array('a)).toContain('a)`

Use `expect.array(actual).toContain(expected)` when you want to check that an item is in an array. For testing items in the array, this uses `===`, a physical equality check.

```reason
open TestFramework;

describe("Array example", ({test}) => {
  test("should contain", ({expect}) => {
    expect.array([|1, 2, 3|]).toContain(2);
  });
});
```

### `expect.array(list('a)).toContainEqual(~equals:('a, 'a) => bool=?, 'a)`

Use `expect.array(actual).toContainEqual` when you want to check that an item is in an array. For testing items in the array, this uses `==` a structural equality check.

```reason
open TestFramework;

type insect = {
  name: string,
  numberOfLegs: int,
};

describe("Array example", ({test}) => {
  test("contain equal", ({expect}) => {
    expect.array(getInsects()).toContainEqual({
      name: "centipede",
      numberOfLegs: 100,
    });
  });
});
```

Comparing types that need a custom comparator (such as floats) can be done using `expect.array(actual).toContainEqual`.

```reason
open TestFramework;

let equals = (f1, f2) => abs_float(f1 -. f2) < 0.1;

describe("Array example", ({test}) => {
  test("contain equal", ({expect}) => {
    expect.array([|1., 2., 3.|]).toContainEqual(~equals, 0.99);
  });
});
```

### `expect.array(actual).toEqual(~equals, expected)`

Use `expect.array(actual).toEqual` to check that an array is equal to another array.

```reason
open TestFramework;

describe("Array example", ({test}) => {
  test("array equality", ({expect}) => {
    expect.array(countToThree()).toEqual([|1, 2, 3|]);
  });
});
```

Comparing arrays of types that need a custom comparator (such as floats) can also be done.

```reason
open TestFramework;

let equals = (f1, f2) => abs_float(f1 -. f2) < 0.1;

describe("Array example", ({test}) => {
  test("toEqual with custom comparator", ({expect}) => {
    expect.array(countToThreeWithFloats()).toEqual(~equals, [|1., 2., 3.|]);
  });
});
```

## `expect.assertions` (as of Rely 3.1.0)
```reason
let expect: {
  ...
  assertions: int => bool,
  hasAssertions: unit => unit,
  ...
}
```

### `expect.assertions(int)`

`expect.assertions(int)` verifies that a certain number of assertions are called during a test. This is often useful when testing code with callbacks, in order to make sure that assertions in a callback actually got called.

```reason
open TestFramework;

describe("expect.assertions", ({test}) => {
  test("doSomething calls both callbacks", ({expect}) => {
    let callback1 = () => expect.bool(true).toBeTrue();
    let callback2 = () => expect.bool(true).not.toBeFalse();

    doSomething(callback1, callback2);

    /* this line can be anywhere inside the function body, if there are multiple
     * calls to expect.assertions, the last one takes precedence */
    expect.assertions(2);
  });
});
```

### `expect.hasAssertions()`

`expect.hasAssertions()` verifies that at least one assertion is called during a test. This is often useful when testing code with callbacks, in order to make sure that assertions in a callback actually got called.

TODO

```reason
open TestFramework;

describe("expect.hasAssertions", ({test}) => {
  test("doSomething calls both callbacks", ({expect}) => {
    let onSuccess = () => expect.bool(true).toBeTrue();

    doSomething(callback1, callback2);

    /* this line can be anywhere inside the function body, if there are multiple
     * calls to expect.assertions, the last one takes precedence */
    expect.assertions(2);
  });
});
```

## `expect.bool`

```reason
type boolMatchers = {
  toBe: bool => unit,
  toBeTrue: unit => unit,
  toBeFalse: unit => unit,
};
type boolMatchersWithNot = {
  not: boolMatchers,
  toBe: bool => unit,
  toBeTrue: unit => unit,
  toBeFalse: unit => unit,
};

let expect: {
  ...
  bool: bool => boolMatchersWithNot
  ...
};
```

### `expect.bool(bool).toBe(bool)`

Use `expect.bool(actual).toBe(expected)` to check that a boolean value is equal to a particular boolean value.

For example this can be useful when writing tests inside of a `List.map` statement.

```reason
open TestFramework;

describe("expect.bool", ({test}) => {
  let _ =
    List.map(
      ((testName, food, expected)) =>
        test(testName, ({expect}) =>
          expect.bool(isDelicious(food)).toBe(expected)
        ),
      [("expect bacon to be delicious", "bacon", true)],
    );
  ();
});
```

### `expect.bool(bool).toBeTrue()`

Use `expect.bool(actual).toBeTrue()` to check that a boolean value is equal to true.

```reason
open TestFramework;

describe("expect.bool", ({test}) => {
  test("expect bacon to be delicious", ({expect}) => {
    expect.bool(isDelicious("bacon")).toBeTrue();
  });
});
```

### `expect.bool(bool).toBeFalse()`

Use `expect.bool(actual).toBeTrue()` to check that a boolean value is equal to false.

```reason
open TestFramework;

describe("expect.bool", ({test}) => {
  test("expect socks not to be delicious", ({expect}) => {
    expect.bool(isDelicious("socks")).toBeFalse();
  });
});
```

## `expect.equal`

```reasonml
type equalsFn('a) = ('a, 'a) => bool;

let expect = {
  ...
  equal: (~equals: equalsFn('a), 'a, 'a) => unit,
  notEqual: (~equals: equalsFn('a), 'a, 'a) => unit,
  ...
}
```

### `expect.equal(~equals: ('a, 'a) => bool=?, 'a, 'a)`

Use `expect.equal(expected, actual)` to check that two values are equal using `==`, a structural equality check. The negation of `expect.equal` is `expect.notEqual`

For example to structurally compare two records you could write:

```reasonml
open TestFramework;

type myType = {
  string,
  int,
};

describe("expect.equal", ({test}) => {
  test("should be  equal", ({expect}) => {
    expect.equal({string: "hello", int: 42}, {string: "hello", int: 42});
  });
});
```

Comparing types that need a custom comparator (such as records that contain floats) can also be done by providing a custom equals function:

```reasonml
open TestFramework;

type myType = {
  string,
  float,
};

describe("expect.equal", ({test}) => {
  test("should be  equal", ({expect}) => {
    let equals = (t1, t2) =>
      t1.string == t2.string && abs_float(t1.float -. t2.float) < 0.001;
    expect.equal(
      ~equals,
      {string: "hello", float: 42.},
      {string: "hello", float: 41.999999},
    );
  });
});
```

## `expect.ext`

## `expect.file`

## `expect.float`

## `expect.fn`

## `expect.int`

### `expect.int(actual).toBe(expected)`

Use `expect.int(actual).toBe(expected)` to check that an integer is equal to a particular value. For example if you expect Deep Thought to return `42` when asked to calculate the answer to the ultimate question, you could write:

```reason
open TestFramework;

describe("expect.int.toBe", ({test}) => {
  test("Calculate answer to the ultimate question", ({expect}) => {
    let answer = DeepThought.answerUltimateQuestion();

    expect.int(answer).toBe(42);
  });
});
```

## `expect.lines`

## `expect.list`

## `expect.mock`

## `expect.option`

## `expect.result`

## `expect.same`

## `expect.string`
